# Story 2.5: Video Call Button (Placeholder Action)

**Epic:** Epic 2 - Counselor Dashboard & Category Management  
**Status:** Draft  
**Created:** December 20, 2025  
**Last Updated:** December 20, 2025

---

## Story

**As a** student,  
**I want** clicking Video Call button to provide feedback (even if calling not yet implemented),  
**so that** I understand the platform recognizes my action and will connect me once the feature is complete.

---

## Acceptance Criteria

1. Video Call button on each counselor card is interactive and styled as secondary action (distinct from Voice Call).
2. Clicking Video Call button displays a toast notification: "Video calling will be available in the next update. Stay tuned!"
3. Console logs the selected counselor category for debugging purposes.
4. Button includes loading state (disabled while notification shows) to prevent double-clicks.
5. All video call button interactions keyboard accessible (Enter key triggers action).

---

## Tasks / Subtasks

- [ ] Update CounselorCardGrid with video call handler (AC: 2, 3)
  - [ ] Implement handleVideoCall function
  - [ ] Show toast notification with placeholder message
  - [ ] Log category name to console
  - [ ] Log category ID for debugging
  - [ ] Match pattern from handleVoiceCall (Story 2.4)
  
- [ ] Add loading state to video button (AC: 4)
  - [ ] Use existing loadingVideo state from Story 2.4
  - [ ] Disable video button during action
  - [ ] Show loading spinner on button
  - [ ] Auto-enable after toast dismisses
  
- [ ] Verify button styling distinction (AC: 1)
  - [ ] Confirm video button uses outline variant
  - [ ] Confirm video button has blue border and text
  - [ ] Ensure visual hierarchy (voice primary, video secondary)
  - [ ] Test hover states
  
- [ ] Verify keyboard accessibility (AC: 5)
  - [ ] Test Tab navigation to video button
  - [ ] Test Enter key triggers onClick
  - [ ] Test Space key triggers onClick
  - [ ] Ensure focus indicator is visible
  
- [ ] Test independent button states
  - [ ] Voice and video buttons can't both be loading simultaneously
  - [ ] Clicking video doesn't affect voice button state
  - [ ] Each category card maintains independent state

---

## Dev Notes

### Updated CounselorCardGrid Component

**components/dashboard/CounselorCardGrid.tsx (updated):**
```typescript
'use client';

import { useEffect, useState } from 'react';
import { CounselorCard } from './CounselorCard';
import { getCategories, CounselorCategory } from '@/lib/api';
import { useToast } from '@/components/ui/use-toast';

export function CounselorCardGrid() {
  const [categories, setCategories] = useState<CounselorCategory[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [loadingVoice, setLoadingVoice] = useState<string | null>(null);
  const [loadingVideo, setLoadingVideo] = useState<string | null>(null);
  const { toast } = useToast();
  
  // ... fetchCategories and useEffect ...
  
  const handleVoiceCall = async (category: CounselorCategory) => {
    console.log('Voice call requested for category:', category.name);
    console.log('Category ID:', category.id);
    
    setLoadingVoice(category.id);
    
    toast({
      title: "Coming Soon",
      description: "Voice calling will be available in the next update. Stay tuned!",
      duration: 4000,
    });
    
    setTimeout(() => {
      setLoadingVoice(null);
    }, 4000);
  };
  
  const handleVideoCall = async (category: CounselorCategory) => {
    console.log('Video call requested for category:', category.name);
    console.log('Category ID:', category.id);
    
    setLoadingVideo(category.id);
    
    toast({
      title: "Coming Soon",
      description: "Video calling will be available in the next update. Stay tuned!",
      duration: 4000,
    });
    
    setTimeout(() => {
      setLoadingVideo(null);
    }, 4000);
  };
  
  // ... return statement with grid ...
}
```

### Button Styling Distinction

**Voice Call Button (Primary):**
```typescript
<Button
  className="flex-1 gap-2 bg-blue-600 hover:bg-blue-700"
>
```
- Solid blue background
- White text
- Primary action styling
- More prominent visually

**Video Call Button (Secondary):**
```typescript
<Button
  variant="outline"
  className="flex-1 gap-2 border-blue-600 text-blue-600 hover:bg-blue-50"
>
```
- Outline/border style
- Blue border and text
- White/light background
- Secondary action styling
- Less prominent than voice button

### Visual Hierarchy Rationale

According to the PRD:
- Voice calling is the primary interaction mode
- Video calling is an enhanced option
- Visual hierarchy reflects this priority
- Both are equally accessible, but voice is more prominent

### Implementation Notes

**No Additional Components Needed:**
- CounselorCard already has video button from Story 2.3
- CounselorCardGrid already has loadingVideo state from Story 2.4
- Toast provider already configured in Story 2.4
- Only need to implement the handleVideoCall function

**Pattern Consistency:**
- handleVideoCall follows exact same pattern as handleVoiceCall
- Same toast duration (4 seconds)
- Same console logging format
- Same loading state management

### Analytics Tracking (Optional)

**Track video call interest:**
```typescript
const handleVideoCall = async (category: CounselorCategory) => {
  console.log('Video call requested for category:', category.name);
  console.log('Category ID:', category.id);
  
  // Analytics tracking
  if (typeof window !== 'undefined' && window.gtag) {
    window.gtag('event', 'video_call_clicked', {
      category: category.name,
      category_id: category.id,
    });
  }
  
  setLoadingVideo(category.id);
  // ... rest of implementation
};
```

### Testing Considerations

**Button Independence:**
- Each category card should have independent loading states
- Clicking voice on one card doesn't affect video on another
- Clicking video doesn't interfere with voice on same card

**State Management:**
- loadingVoice and loadingVideo are separate state variables
- Each tracks category.id of the currently loading action
- Prevents conflicts between buttons

---

## Testing

### Testing Standards

**Test Locations:**
- Component tests: `__tests__/components/dashboard/CounselorCard.test.tsx`
- Integration tests: `__tests__/integration/video-call-placeholder.test.tsx`

**Testing Framework:**
- Vitest 1.2.0
- React Testing Library
- Testing Library User Event

**Testing Requirements for This Story:**

1. **Video Button Click Tests:**
   ```typescript
   import { render, screen, waitFor } from '@testing-library/react';
   import userEvent from '@testing-library/user-event';
   import { CounselorCardGrid } from '@/components/dashboard/CounselorCardGrid';
   
   test('shows toast when video call button clicked', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const videoButton = screen.getAllByRole('button', { name: /video call/i })[0];
     await userEvent.click(videoButton);
     
     await waitFor(() => {
       expect(screen.getByText(/coming soon/i)).toBeInTheDocument();
       expect(screen.getByText(/video calling will be available/i)).toBeInTheDocument();
     });
   });
   
   test('logs category information to console', async () => {
     const consoleSpy = vi.spyOn(console, 'log');
     
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const videoButton = screen.getAllByRole('button', { name: /video call/i })[0];
     await userEvent.click(videoButton);
     
     expect(consoleSpy).toHaveBeenCalledWith(
       'Video call requested for category:',
       'Health'
     );
     expect(consoleSpy).toHaveBeenCalledWith(
       'Category ID:',
       expect.any(String)
     );
     
     consoleSpy.mockRestore();
   });
   ```

2. **Loading State Tests:**
   ```typescript
   test('disables video button during loading', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const videoButton = screen.getAllByRole('button', { name: /video call/i })[0];
     await userEvent.click(videoButton);
     
     // Button should be disabled
     expect(videoButton).toBeDisabled();
     
     // Should show loading spinner
     await waitFor(() => {
       const loader = videoButton.querySelector('[class*="animate-spin"]');
       expect(loader).toBeInTheDocument();
     });
     
     // Button should re-enable after timeout
     await waitFor(() => {
       expect(videoButton).not.toBeDisabled();
     }, { timeout: 5000 });
   });
   
   test('prevents double-clicks on video button', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const videoButton = screen.getAllByRole('button', { name: /video call/i })[0];
     
     // Click twice rapidly
     await userEvent.click(videoButton);
     await userEvent.click(videoButton);
     
     // Should only show one toast
     const toasts = screen.getAllByRole('status');
     expect(toasts).toHaveLength(1);
   });
   ```

3. **Button Styling Tests:**
   ```typescript
   test('video button has outline styling', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const videoButton = screen.getAllByRole('button', { name: /video call/i })[0];
     
     // Check for outline variant classes
     expect(videoButton).toHaveClass('border-blue-600');
     expect(videoButton).toHaveClass('text-blue-600');
   });
   
   test('voice button has primary styling', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const voiceButton = screen.getAllByRole('button', { name: /voice call/i })[0];
     
     // Check for primary variant classes
     expect(voiceButton).toHaveClass('bg-blue-600');
   });
   ```

4. **Button Independence Tests:**
   ```typescript
   test('video and voice buttons have independent loading states', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const voiceButton = screen.getAllByRole('button', { name: /voice call/i })[0];
     const videoButton = screen.getAllByRole('button', { name: /video call/i })[0];
     
     // Click voice button
     await userEvent.click(voiceButton);
     
     // Voice should be disabled, video should still be enabled
     expect(voiceButton).toBeDisabled();
     expect(videoButton).not.toBeDisabled();
   });
   
   test('clicking video on one card does not affect other cards', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
       expect(screen.getByText('Career')).toBeInTheDocument();
     });
     
     const videoButtons = screen.getAllByRole('button', { name: /video call/i });
     
     // Click first card's video button
     await userEvent.click(videoButtons[0]);
     
     // First button should be disabled
     expect(videoButtons[0]).toBeDisabled();
     
     // Other buttons should still be enabled
     expect(videoButtons[1]).not.toBeDisabled();
   });
   ```

5. **Keyboard Accessibility Tests:**
   ```typescript
   test('video button accessible via keyboard', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const videoButton = screen.getAllByRole('button', { name: /video call/i })[0];
     
     // Tab to button
     videoButton.focus();
     expect(videoButton).toHaveFocus();
     
     // Press Enter
     await userEvent.keyboard('{Enter}');
     
     await waitFor(() => {
       expect(screen.getByText(/coming soon/i)).toBeInTheDocument();
     });
   });
   
   test('video button triggers on Space key', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const videoButton = screen.getAllByRole('button', { name: /video call/i })[0];
     
     videoButton.focus();
     await userEvent.keyboard(' '); // Space key
     
     await waitFor(() => {
       expect(screen.getByText(/coming soon/i)).toBeInTheDocument();
     });
   });
   
   test('can tab between voice and video buttons', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const voiceButton = screen.getAllByRole('button', { name: /voice call/i })[0];
     const videoButton = screen.getAllByRole('button', { name: /video call/i })[0];
     
     voiceButton.focus();
     expect(voiceButton).toHaveFocus();
     
     // Tab to next button (should be video)
     await userEvent.tab();
     expect(videoButton).toHaveFocus();
   });
   ```

6. **Integration Tests:**
   ```typescript
   test('both voice and video buttons work on same card', async () => {
     render(<CounselorCardGrid />);
     
     await waitFor(() => {
       expect(screen.getByText('Health')).toBeInTheDocument();
     });
     
     const voiceButton = screen.getAllByRole('button', { name: /voice call/i })[0];
     const videoButton = screen.getAllByRole('button', { name: /video call/i })[0];
     
     // Click voice
     await userEvent.click(voiceButton);
     await waitFor(() => {
       expect(screen.getByText(/voice calling will be available/i)).toBeInTheDocument();
     });
     
     // Wait for voice loading to clear
     await waitFor(() => {
       expect(voiceButton).not.toBeDisabled();
     }, { timeout: 5000 });
     
     // Click video
     await userEvent.click(videoButton);
     await waitFor(() => {
       expect(screen.getByText(/video calling will be available/i)).toBeInTheDocument();
     });
   });
   ```

7. **Manual Testing Checklist:**
   - [ ] Click video call button shows toast notification
   - [ ] Toast message is: "Video calling will be available in the next update. Stay tuned!"
   - [ ] Console logs category name and ID
   - [ ] Button is disabled during toast display
   - [ ] Loading spinner appears on button
   - [ ] Button re-enables after ~4 seconds
   - [ ] Cannot double-click button
   - [ ] Video button has outline style (not solid)
   - [ ] Voice button has solid blue style
   - [ ] Visual hierarchy is clear (voice more prominent)
   - [ ] Tab key can focus video button
   - [ ] Enter key triggers video button
   - [ ] Space key triggers video button
   - [ ] Focus indicator is visible
   - [ ] Can tab between voice and video buttons
   - [ ] Voice and video loading states are independent
   - [ ] Each card's buttons work independently

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-20 | 1.0 | Initial story creation | Sarah (PO) |